OUTPUT = bin

JHTML_SRCS += adjectives.jhtml
JHTML_SRCS += aap.jhtml
JHTML_SRCS += confusible-kanji.jhtml
JHTML_SRCS += grammar-activity-time.jhtml
JHTML_SRCS += grammar-adj-sa.jhtml
JHTML_SRCS += grammar-adverb-naru.jhtml
JHTML_SRCS += grammar-adverbs.jhtml
JHTML_SRCS += grammar-aida.jhtml
JHTML_SRCS += grammar-amari.jhtml
JHTML_SRCS += grammar-aru.jhtml
JHTML_SRCS += grammar-ato-de.jhtml
JHTML_SRCS += grammar-ba-hodo.jhtml
JHTML_SRCS += grammar-ba-ii.jhtml
JHTML_SRCS += grammar-ba-yokatta.jhtml
JHTML_SRCS += grammar-baai.jhtml
JHTML_SRCS += grammar-bakari.jhtml
JHTML_SRCS += grammar-counter-bun.jhtml
JHTML_SRCS += grammar-counter-dai.jhtml
JHTML_SRCS += grammar-counter-jikan.jhtml
JHTML_SRCS += grammar-counter-kagetsu.jhtml
JHTML_SRCS += grammar-counter-kai.jhtml
JHTML_SRCS += grammar-counter-mai.jhtml
JHTML_SRCS += grammar-counter-nen.jhtml
JHTML_SRCS += grammar-counter-nichi.jhtml
JHTML_SRCS += grammar-counter-nin.jhtml
JHTML_SRCS += grammar-counter-shukan.jhtml
JHTML_SRCS += grammar-counter-tsu.jhtml
JHTML_SRCS += grammar-counters.jhtml
JHTML_SRCS += grammar-dai.jhtml
JHTML_SRCS += grammar-de-cause.jhtml
JHTML_SRCS += grammar-dekakete-kuru.jhtml
JHTML_SRCS += grammar-dekiru.jhtml
JHTML_SRCS += grammar-demo.jhtml
JHTML_SRCS += grammar-deshou-ka.jhtml
JHTML_SRCS += grammar-deshou.jhtml
JHTML_SRCS += grammar-dou.jhtml
JHTML_SRCS += grammar-douyatte.jhtml
JHTML_SRCS += grammar-ga-conjunction.jhtml
JHTML_SRCS += grammar-giving-receiving-actions.jhtml
JHTML_SRCS += grammar-giving-receiving.jhtml
JHTML_SRCS += grammar-goro.jhtml
JHTML_SRCS += grammar-hazu.jhtml
JHTML_SRCS += grammar-honorific-humble.jhtml
JHTML_SRCS += grammar-hou-ga-ii.html
JHTML_SRCS += grammar-interrogatives.jhtml
JHTML_SRCS += grammar-itte-kuru.jhtml
JHTML_SRCS += grammar-kadouka.jhtml
JHTML_SRCS += grammar-kamo-shiremasen.jhtml
JHTML_SRCS += grammar-kata.jhtml
JHTML_SRCS += grammar-kawari-ni.jhtml
JHTML_SRCS += grammar-kenjougo.jhtml
JHTML_SRCS += grammar-kitto-tabun-moshikashitara.jhtml
JHTML_SRCS += grammar-koro.jhtml
JHTML_SRCS += grammar-koso.jhtml
JHTML_SRCS += grammar-kosoado.jhtml
JHTML_SRCS += grammar-koto-ga-dekiru.jhtml
JHTML_SRCS += grammar-koto-nominaliser.jhtml
JHTML_SRCS += grammar-mada-te-inai.jhtml
JHTML_SRCS += grammar-mada.jhtml
JHTML_SRCS += grammar-made-ni.jhtml
JHTML_SRCS += grammar-mae-ni.jhtml
JHTML_SRCS += grammar-mama.jhtml
JHTML_SRCS += grammar-mashouka.jhtml
JHTML_SRCS += grammar-mitai.jhtml
JHTML_SRCS += grammar-n-desu.jhtml
JHTML_SRCS += grammar-nagara.jhtml
JHTML_SRCS += grammar-nai-de.jhtml
JHTML_SRCS += grammar-nai-to.jhtml
JHTML_SRCS += grammar-nakanaka.jhtml
JHTML_SRCS += grammar-nakereba-naranai.jhtml
JHTML_SRCS += grammar-nakute-mo-ii.jhtml
JHTML_SRCS += grammar-nanika-shinpai-na-koto.jhtml
JHTML_SRCS += grammar-nara.jhtml
JHTML_SRCS += grammar-ni-shite-wa.jhtml
JHTML_SRCS += grammar-ni-suru.jhtml
JHTML_SRCS += grammar-ni-tsuite.jhtml
JHTML_SRCS += grammar-nikui.jhtml
JHTML_SRCS += grammar-no-nominaliser.jhtml
JHTML_SRCS += grammar-no-wa-N-desu.jhtml
JHTML_SRCS += grammar-node.jhtml
JHTML_SRCS += grammar-noni-although.jhtml
JHTML_SRCS += grammar-noni-purpose.jhtml
JHTML_SRCS += grammar-o-ni-naru.jhtml
JHTML_SRCS += grammar-o-suru.jhtml
JHTML_SRCS += grammar-owaru.jhtml
JHTML_SRCS += grammar-particle-dake.jhtml
JHTML_SRCS += grammar-particle-de.jhtml
JHTML_SRCS += grammar-particle-demo.jhtml
JHTML_SRCS += grammar-particle-e.jhtml
JHTML_SRCS += grammar-particle-ga.jhtml
JHTML_SRCS += grammar-particle-mo.jhtml
JHTML_SRCS += grammar-particle-shika.jhtml
JHTML_SRCS += grammar-particle-to.jhtml
JHTML_SRCS += grammar-particle-wa.jhtml
JHTML_SRCS += grammar-particle-wo.jhtml
JHTML_SRCS += grammar-phenomenon-senses-ga-suru.jhtml
JHTML_SRCS += grammar-place-de-aru.jhtml
JHTML_SRCS += grammar-plain-form-shi.jhtml
JHTML_SRCS += grammar-polite-and-plain.jhtml
JHTML_SRCS += grammar-ppoi.jhtml
JHTML_SRCS += grammar-purpose-ni.jhtml
JHTML_SRCS += grammar-quantifier-dake.jhtml
JHTML_SRCS += grammar-quantifier-de.jhtml
JHTML_SRCS += grammar-quantifier-mo.jhtml
JHTML_SRCS += grammar-quantifier-ni.jhtml
JHTML_SRCS += grammar-quantifier-wa.jhtml
JHTML_SRCS += grammar-rashii.jhtml
JHTML_SRCS += grammar-relative-clause.jhtml
JHTML_SRCS += grammar-shinaide-alternative.jhtml
JHTML_SRCS += grammar-sonkeigo.jhtml
JHTML_SRCS += grammar-sore-de.jhtml
JHTML_SRCS += grammar-sore-dewa.jhtml
JHTML_SRCS += grammar-sore-kara.jhtml
JHTML_SRCS += grammar-sore-nara.jhtml
JHTML_SRCS += grammar-sore-ni.jhtml
JHTML_SRCS += grammar-sore-wa.jhtml
JHTML_SRCS += grammar-soretomo.jhtml
JHTML_SRCS += grammar-soshite.jhtml
JHTML_SRCS += grammar-sou-desu-appearance.jhtml
JHTML_SRCS += grammar-sou-desu-hearsay.jhtml
JHTML_SRCS += grammar-sou-desu-ka.jhtml
JHTML_SRCS += grammar-sugiru.jhtml
JHTML_SRCS += grammar-ta-koto-ga-aru.jhtml
JHTML_SRCS += grammar-tame-ni.jhtml
JHTML_SRCS += grammar-tara-ii-desu-ka.jhtml
JHTML_SRCS += grammar-tara.jhtml
JHTML_SRCS += grammar-tari.jhtml
JHTML_SRCS += grammar-te-aru.jhtml
JHTML_SRCS += grammar-te-causative-itadakemasenka.jhtml
JHTML_SRCS += grammar-te-cause.jhtml
JHTML_SRCS += grammar-te-conjunctive-forms.jhtml
JHTML_SRCS += grammar-te-iru.jhtml
JHTML_SRCS += grammar-te-itadakemasenka.jhtml
JHTML_SRCS += grammar-te-kara.jhtml
JHTML_SRCS += grammar-te-kudasai.jhtml
JHTML_SRCS += grammar-te-kudasaimasenka.jhtml
JHTML_SRCS += grammar-te-kuru.jhtml
JHTML_SRCS += grammar-te-miru.jhtml
JHTML_SRCS += grammar-te-mo-ii.jhtml
JHTML_SRCS += grammar-te-mo.jhtml
JHTML_SRCS += grammar-te-oku.jhtml
JHTML_SRCS += grammar-te-shimau.jhtml
JHTML_SRCS += grammar-te-shinaide-accompany.jhtml
JHTML_SRCS += grammar-te-wa-ikemasen.jhtml
JHTML_SRCS += grammar-teineigo.jhtml
JHTML_SRCS += grammar-to-conditional.jhtml
JHTML_SRCS += grammar-to-itte-imashita.jhtml
JHTML_SRCS += grammar-to-iu-imi.jhtml
JHTML_SRCS += grammar-to-iu.jhtml
JHTML_SRCS += grammar-to-omou.jhtml
JHTML_SRCS += grammar-to-tsutaete-itadakemasenka.jhtml
JHTML_SRCS += grammar-tochuu-de.jhtml
JHTML_SRCS += grammar-toka.jhtml
JHTML_SRCS += grammar-token-ni.jhtml
JHTML_SRCS += grammar-toki.jhtml
JHTML_SRCS += grammar-tokoro.jhtml
JHTML_SRCS += grammar-toori-ni.jhtml
JHTML_SRCS += grammar-toshite-wa.jhtml
JHTML_SRCS += grammar-toshite.jhtml
JHTML_SRCS += grammar-tsukuru.jhtml
JHTML_SRCS += grammar-tsumori.jhtml
JHTML_SRCS += grammar-uchi-ni.jhtml
JHTML_SRCS += grammar-verb-conjugations.jhtml
JHTML_SRCS += grammar-verb-contractions.jhtml
JHTML_SRCS += grammar-verb-formation-causative.jhtml
JHTML_SRCS += grammar-verb-formation-conditional.jhtml
JHTML_SRCS += grammar-verb-formation-dictionary.jhtml
JHTML_SRCS += grammar-verb-formation-imperative.jhtml
JHTML_SRCS += grammar-verb-formation-nai.jhtml
JHTML_SRCS += grammar-verb-formation-passive.jhtml
JHTML_SRCS += grammar-verb-formation-potential.jhtml
JHTML_SRCS += grammar-verb-formation-prohibitive.jhtml
JHTML_SRCS += grammar-verb-formation-ta.jhtml
JHTML_SRCS += grammar-verb-formation-te.jhtml
JHTML_SRCS += grammar-verb-formation-volitional.jhtml
JHTML_SRCS += grammar-verb-use-of-causative.jhtml
JHTML_SRCS += grammar-verb-use-of-conditional.jhtml
JHTML_SRCS += grammar-verb-use-of-imperative-prohibitive.jhtml
JHTML_SRCS += grammar-verb-use-of-passive.jhtml
JHTML_SRCS += grammar-verb-use-of-potential.jhtml
JHTML_SRCS += grammar-verb-use-of-volitional.jhtml
JHTML_SRCS += grammar-yasui.jhtml
JHTML_SRCS += grammar-yotei.jhtml
JHTML_SRCS += grammar-you-desu.jhtml
JHTML_SRCS += grammar-you-ni-naru.jhtml
JHTML_SRCS += grammar-you-ni-suru.jhtml
JHTML_SRCS += grammar-you-ni.jhtml
JHTML_SRCS += grammar-you-to-omou.jhtml
JHTML_SRCS += grammar-zehi.jhtml
JHTML_SRCS += grammar-zutsu.jhtml
JHTML_SRCS += grammar.jhtml
JHTML_SRCS += index.jhtml
JHTML_SRCS += jpod-absolute-beginner.jhtml
JHTML_SRCS += jpod-advanced.jhtml
JHTML_SRCS += jpod-beginner.jhtml
JHTML_SRCS += jpod-intermediate.jhtml
JHTML_SRCS += jpod-lower-intermediate.jhtml
JHTML_SRCS += jpod-miscellaneous.jhtml
JHTML_SRCS += jpod-upper-intermediate.jhtml
JHTML_SRCS += jpod.jhtml
JHTML_SRCS += kana.jhtml
JHTML_SRCS += kanji-with-a-single-reading.jhtml
JHTML_SRCS += mnn-toc.jhtml
JHTML_SRCS += mnn.jhtml
JHTML_SRCS += nsm-n3g-toc.jhtml
JHTML_SRCS += nsm-n3g.jhtml
JHTML_SRCS += study-material.jhtml
JHTML_SRCS += verbs.jhtml

TEST_JHTML_SRCS += test-include.jhtml
TEST_JHTML_SRCS += test-kana.jhtml
TEST_JHTML_SRCS += test.jhtml

CSS_SRCS += japanese.css

TEST_TARGETS += $(foreach JH,$(TEST_JHTML_SRCS),$(OUTPUT)/$(subst .jhtml,.html,$(JH))) 

TARGETS += $(foreach JH,$(JHTML_SRCS),$(OUTPUT)/$(subst .jhtml,.html,$(JH))) 
TARGETS += $(foreach CSS,$(CSS_SRCS),$(OUTPUT)/$(CSS))
TARGETS += $(TEST_TARGETS)

DATA_FILES += kanji.data
DATA_FILES += references.data

SCRIPT_FILES += DataKanji.rb
SCRIPT_FILES += DataKanjidic.rb
SCRIPT_FILES += DataRefs.rb
SCRIPT_FILES += DebugSupport.rb
SCRIPT_FILES += FastKanji.rb
SCRIPT_FILES += HiraganaSupport.rb
SCRIPT_FILES += Kanji.rb
SCRIPT_FILES += KanjiSupport.rb
SCRIPT_FILES += KatakanaSupport.rb
SCRIPT_FILES += RefsSupport.rb
SCRIPT_FILES += UnicodeSupport.rb
SCRIPT_FILES += japanese-to-codes.rb 

GLOBAL_DEPENDENCIES += $(DATA_FILES)
GLOBAL_DEPENDENCIES += $(SCRIPT_FILES)

default: $(TARGETS)

CSS_PARTIALS += $(wildcard _*.scss)

$(OUTPUT)/%.html: %.jhtml $(GLOBAL_DEPENDENCIES)
	@mkdir -p $(OUTPUT)
	./japanese-to-codes.rb $< $@

$(OUTPUT)/%.css: %.scss $(CSS_PARTIALS)
	@mkdir -p $(OUTPUT)
	sass --style compressed $<:$@
